import{d as a,q as e,r as s,v as t,o as l,c as n,w as i,y as o,x as d,p as c,n as r,i as u,L as m,X as _,m as b,a9 as p,a as w,b as f,e as v,g as y,h,u as g,F as x,f as k,t as I,a6 as $,A as C,ad as S,j as N}from"./index-BYA5EtG0.js";import{f as T,y as L,m as j,l as V,F as z,i as P,g as X,t as H,o as W,G,X as q,b as A,S as F,w as K,h as M,K as E,q as O}from"./page-wraper.BLx1nEHM.js";import{w as R}from"./wd-badge.BQk79k_w.js";import{w as B,a as D}from"./wd-sticky-box.4XsHyQT5.js";import{u as J}from"./useTouch.jeMyJgz6.js";import{u as Q}from"./useChildren.CXhGFXP6.js";import{u as U}from"./useTranslate.CrhsM-8W.js";const Y=Symbol("wd-tabs"),Z={...T,modelValue:L(0),slidableNum:j(6),mapNum:j(10),mapTitle:String,sticky:V(!1),offsetTop:j(0),swipeable:V(!1),autoLineWidth:V(!1),lineWidth:z,lineHeight:z,color:P(""),inactiveColor:P(""),animated:V(!1),duration:j(300),slidable:P("auto")},aa=A(a({name:"wd-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...T,name:z,title:String,disabled:V(!1),lazy:V(!0),badgeProps:Object},setup(a){const _=a,{proxy:b}=m(),{parent:p,index:w}=X(Y),f=e((()=>!!H(p)&&p.state.activeIndex===w.value)),v=s(f.value),y=e((()=>{const a={};return f.value||H(p)&&p.props.animated||(a.display="none"),W(a)})),h=e((()=>!_.lazy||v.value||f.value));return t(f,(a=>{a&&(v.value=!0)})),t((()=>_.name),(a=>{!H(a)||G(a)||q(a)?p&&function(a){const{name:e}=_;if(null==e||""===e)return;p&&p.children.forEach((s=>{s.$.uid!==a.$.uid&&s.name===e&&console.error(`The tab's bound value: ${e} has been used`)}))}(b):console.error("[wot design] error(wd-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),(a,e)=>{const s=u;return l(),n(s,{class:r(`wd-tab ${a.customClass}`),style:o(a.customStyle)},{default:i((()=>[h.value?(l(),n(s,{key:0,class:"wd-tab__body",style:o(y.value)},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["style"])):c("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-4957991f"]]),ea=A(a({name:"wd-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:Z,emits:["change","disabled","click","update:modelValue"],setup(a,{expose:s,emit:T}){const L=".wd-tabs__nav-item",j=".wd-tabs__nav-item-text",V=".wd-tabs__nav-container",z=a,P=T,{translate:X}=U("tabs"),A=_({activeIndex:0,lineStyle:"display:none;",useInnerLine:!1,inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:Z,linkChildren:aa}=Q(Y);aa({state:A,props:z});const{proxy:ea}=m(),sa=J(),ta=e((()=>"always"===z.slidable||Z.length>z.slidableNum)),la=e((()=>z.animated?W({left:-100*A.activeIndex+"%","transition-duration":z.duration+"ms","-webkit-transition-duration":z.duration+"ms"}):"")),na=(a,e)=>H(a.name)?a.name:e,ia=(a=0,e=!1,s=!0)=>{0!==Z.length&&(a=pa(a),Z[a].disabled||(A.activeIndex=a,s&&(ca(!1===e),ra()),function(){if(!A.inited)return;const a=na(Z[A.activeIndex],A.activeIndex);a!==z.modelValue&&(P("change",{index:A.activeIndex,name:a}),P("update:modelValue",a))}()))},oa=F(ia,100,{leading:!0});function da(){A.mapShow?(A.animating=!1,setTimeout((()=>{A.mapShow=!1}),300)):(A.mapShow=!0,setTimeout((()=>{A.animating=!0}),100))}async function ca(a=!0){if(!A.inited)return;const{autoLineWidth:e,lineWidth:s,lineHeight:t}=z;try{const l={};if(H(s))l.width=M(s);else if(e){const a=await E(j,!0,ea),e=Number(a[A.activeIndex].width);l.width=M(e)}H(t)&&(l.height=M(t),l.borderRadius=`calc(${M(t)} / 2)`);const n=await E(L,!0,ea),i=n[A.activeIndex];let o=n.slice(0,A.activeIndex).reduce(((a,e)=>a+Number(e.width)),0)+Number(i.width)/2;o&&(l.transform=`translateX(${o}px) translateX(-50%)`,a&&(l.transition="width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),A.useInnerLine=!1,A.lineStyle=W(l))}catch(l){console.error("[wot design] error(wd-tabs): update line style failed",l)}}function ra(){A.inited&&Promise.all([E(L,!0,ea),E(V,!1,ea)]).then((([a,e])=>{const s=a[A.activeIndex],t=a.slice(0,A.activeIndex).reduce(((a,e)=>a+e.width),0)-(e.width-Number(s.width))/2;t===A.scrollLeft?A.scrollLeft=t+Math.random()/1e4:A.scrollLeft=t}))}function ua(a){if(void 0===a)return;const{disabled:e}=Z[a],s=na(Z[a],a);e?P("disabled",{index:a,name:s}):(A.mapShow&&da(),oa(a),P("click",{index:a,name:s}))}function ma(a){z.swipeable&&sa.touchStart(a)}function _a(a){z.swipeable&&sa.touchMove(a)}function ba(){if(!z.swipeable)return;const{direction:a,deltaX:e,offsetX:s}=sa;"horizontal"===a.value&&s.value>=50&&(e.value>0&&0!==A.activeIndex?oa(A.activeIndex-1):e.value<0&&A.activeIndex!==Z.length-1&&oa(A.activeIndex+1))}function pa(a){if(G(a)&&a>=Z.length&&(console.error("[wot design] warning(wd-tabs): the type of tabs' value is Number shouldn't be less than its children"),a=0),q(a)){const e=Z.findIndex((e=>e.name===a));a=-1===e?0:e}return a}return t((()=>z.modelValue),(a=>{G(a)||q(a)||console.error("[wot design] error(wd-tabs): the type of value should be number or string"),""!==a&&H(a)||console.error("[wot design] error(wd-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof a&&a<0&&console.error("[wot design] error(wd-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),t((()=>z.modelValue),(a=>{const e=pa(a);oa(a,!1,e!==A.activeIndex)}),{immediate:!1,deep:!0}),t((()=>Z.length),(()=>{A.inited&&p((()=>{oa(z.modelValue)}))})),t((()=>z.slidableNum),(a=>{O(a,"slidableNum")})),t((()=>z.mapNum),(a=>{O(a,"mapNum")})),b((()=>{A.inited=!0,p((()=>{ia(z.modelValue,!0),A.useInnerLine=!0}))})),s({setActive:oa,scrollIntoView:ra,updateLineStyle:ca}),(a,e)=>{const s=N,t=w(f("wd-badge"),R),m=u,_=$;return a.sticky?(l(),n(D,{key:0},{default:i((()=>[v(m,{class:r(`wd-tabs ${a.customClass} ${ta.value?"is-slide":""} ${a.mapNum<g(Z).length&&0!==a.mapNum?"is-map":""}`),style:o(a.customStyle)},{default:i((()=>[v(B,{"offset-top":a.offsetTop},{default:i((()=>[v(m,{class:"wd-tabs__nav wd-tabs__nav--sticky"},{default:i((()=>[v(m,{class:"wd-tabs__nav--wrap"},{default:i((()=>[v(_,{"scroll-x":ta.value,"scroll-with-animation":"","scroll-left":A.scrollLeft},{default:i((()=>[v(m,{class:"wd-tabs__nav-container"},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((e,d)=>(l(),n(m,{onClick:a=>ua(d),key:d,class:r(`wd-tabs__nav-item  ${A.activeIndex===d?"is-active":""} ${e.disabled?"is-disabled":""}`),style:o(A.activeIndex===d?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[e.badgeProps?(l(),n(t,C(S({key:0},e.badgeProps)),{default:i((()=>[v(s,{class:"wd-tabs__nav-item-text"},{default:i((()=>[k(I(e.title),1)])),_:2},1024)])),_:2},1040)):(l(),n(s,{key:1,class:"wd-tabs__nav-item-text"},{default:i((()=>[k(I(e.title),1)])),_:2},1024)),A.activeIndex===d&&A.useInnerLine?(l(),n(m,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):c("",!0)])),_:2},1032,["onClick","class","style"])))),128)),v(m,{class:"wd-tabs__line",style:o(A.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<g(Z).length&&0!==a.mapNum?(l(),n(m,{key:0,class:"wd-tabs__map"},{default:i((()=>[v(m,{class:r("wd-tabs__map-btn  "+(A.animating?"is-open":"")),onClick:da},{default:i((()=>[v(m,{class:r("wd-tabs__map-arrow  "+(A.animating?"is-open":""))},{default:i((()=>[v(K,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),v(m,{class:"wd-tabs__map-header",style:o(`${A.mapShow?"":"display:none;"}  ${A.animating?"opacity:1;":""}`)},{default:i((()=>[k(I(a.mapTitle||g(X)("all")),1)])),_:1},8,["style"]),v(m,{class:r("wd-tabs__map-body  "+(A.animating?"is-open":"")),style:o(A.mapShow?"":"display:none")},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((e,s)=>(l(),n(m,{class:"wd-tabs__map-nav-item",key:s,onClick:a=>ua(s)},{default:i((()=>[v(m,{class:r(`wd-tabs__map-nav-btn ${A.activeIndex===s?"is-active":""}  ${e.disabled?"is-disabled":""}`),style:o(A.activeIndex===s?a.color?"color:"+a.color+";border-color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[k(I(e.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):c("",!0)])),_:1})])),_:1},8,["offset-top"]),v(m,{class:"wd-tabs__container",onTouchstart:ma,onTouchmove:_a,onTouchend:ba,onTouchcancel:ba},{default:i((()=>[v(m,{class:r(["wd-tabs__body",a.animated?"is-animated":""]),style:o(la.value)},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(m,{class:"wd-tabs__mask",style:o(`${A.mapShow?"":"display:none;"} ${A.animating?"opacity:1;":""}`),onClick:da},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(l(),n(m,{key:1,class:r(`wd-tabs ${a.customClass} ${ta.value?"is-slide":""} ${a.mapNum<g(Z).length&&0!==a.mapNum?"is-map":""}`)},{default:i((()=>[v(m,{class:"wd-tabs__nav"},{default:i((()=>[v(m,{class:"wd-tabs__nav--wrap"},{default:i((()=>[v(_,{"scroll-x":ta.value,"scroll-with-animation":"","scroll-left":A.scrollLeft},{default:i((()=>[v(m,{class:"wd-tabs__nav-container"},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((e,d)=>(l(),n(m,{onClick:a=>ua(d),key:d,class:r(`wd-tabs__nav-item ${A.activeIndex===d?"is-active":""} ${e.disabled?"is-disabled":""}`),style:o(A.activeIndex===d?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[e.badgeProps?(l(),n(t,S({key:0,"custom-class":"wd-tabs__nav-item-badge"},e.badgeProps),{default:i((()=>[v(s,{class:"wd-tabs__nav-item-text"},{default:i((()=>[k(I(e.title),1)])),_:2},1024)])),_:2},1040)):(l(),n(s,{key:1,class:"wd-tabs__nav-item-text"},{default:i((()=>[k(I(e.title),1)])),_:2},1024)),A.activeIndex===d&&A.useInnerLine?(l(),n(m,{key:2,class:"wd-tabs__line wd-tabs__line--inner"})):c("",!0)])),_:2},1032,["onClick","class","style"])))),128)),v(m,{class:"wd-tabs__line",style:o(A.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<g(Z).length&&0!==a.mapNum?(l(),n(m,{key:0,class:"wd-tabs__map"},{default:i((()=>[v(m,{class:"wd-tabs__map-btn",onClick:da},{default:i((()=>[v(m,{class:r("wd-tabs__map-arrow "+(A.animating?"is-open":""))},{default:i((()=>[v(K,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),v(m,{class:"wd-tabs__map-header",style:o(`${A.mapShow?"":"display:none;"}  ${A.animating?"opacity:1;":""}`)},{default:i((()=>[k(I(g(X)("all")),1)])),_:1},8,["style"]),v(m,{class:r("wd-tabs__map-body "+(A.animating?"is-open":"")),style:o(A.mapShow?"":"display:none")},{default:i((()=>[(l(!0),y(x,null,h(g(Z),((a,e)=>(l(),n(m,{class:"wd-tabs__map-nav-item",key:e,onClick:a=>ua(e)},{default:i((()=>[v(m,{class:r(`wd-tabs__map-nav-btn ${A.activeIndex===e?"is-active":""}  ${a.disabled?"is-disabled":""}`)},{default:i((()=>[k(I(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):c("",!0)])),_:1}),v(m,{class:"wd-tabs__container",onTouchstart:ma,onTouchmove:_a,onTouchend:ba,onTouchcancel:ba},{default:i((()=>[v(m,{class:r(["wd-tabs__body",a.animated?"is-animated":""]),style:o(la.value)},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),v(m,{class:"wd-tabs__mask",style:o(`${A.mapShow?"":"display:none;"}  ${A.animating?"opacity:1":""}`),onClick:da},null,8,["style"])])),_:3},8,["class"]))}}}),[["__scopeId","data-v-7a2478eb"]]);export{aa as _,ea as a};
