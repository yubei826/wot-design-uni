import{u as e,_ as l}from"./wd-message-box.xLxZovw7.js";import{d as a,r as t,q as o,v as s,S as u,H as c,m as r,Q as i,o as d,c as n,w as m,e as v,y as p,x as f,f as V,t as h,n as _,K as w,I as y,i as k,j as x,L as b,a as g,b as S}from"./index-BYA5EtG0.js";import{f as j,m as C,i as F,l as z,J as I,h as L,o as U,s as M,b as P,a as T}from"./page-wraper.BLx1nEHM.js";import{_ as G}from"./demo-block.icKxg5-P.js";import{_ as W}from"./wd-button.Dpaqum9N.js";import"./wd-input.D8npSRuy.js";import"./useTranslate.CrhsM-8W.js";const $=P(a({name:"wd-circle",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...j,modelValue:C(0),size:C(100),color:{type:[String,Object],default:"#4d80f0"},layerColor:F("#EBEEF5"),fill:String,speed:C(50),text:String,strokeWidth:C(10),strokeLinecap:F("round"),clockwise:z(!0)},setup(e){const l=2*Math.PI,a=-Math.PI/2,g=1,S=e,j=t(""),C=t(0),F=t(null),z=t(1),P=t(`wd-circle${I()}`);let T=null;const G=o((()=>S.size)),W=o((()=>S.strokeWidth)),$=o((()=>{const e={width:L(S.size),height:L(S.size)};return`${U(e)};`}));s((()=>S.modelValue),(()=>{!function(){if(S.speed<=0||S.speed>1e3)return void H(S.modelValue);R(),C.value=C.value||0;const e=()=>{F.value=setTimeout((()=>{C.value!==S.modelValue?(Math.abs(C.value-S.modelValue)<g?C.value=S.modelValue:C.value<S.modelValue?C.value+=g:C.value-=g,H(C.value),e()):R()}),1e3/S.speed)};e()}()}),{immediate:!0}),s((()=>S.size),(()=>{let e=setTimeout((()=>{H(C.value),clearTimeout(e)}),50)}),{immediate:!1}),s((()=>S.color),(()=>{H(C.value)}),{immediate:!1,deep:!0}),u((()=>{z.value=c().pixelRatio})),r((()=>{C.value=S.modelValue,H(C.value)})),i((()=>{R()}));const{proxy:E}=b();function O(e,l,a,t,o){let s=W.value;const u=G.value/2;o||(s/=2);const c=u-s/2;e.strokeStyle=l,e.setStrokeStyle(l),e.setLineWidth(s),e.setLineCap(S.strokeLinecap),e.beginPath(),e.arc(u,u,c,a,t,!S.clockwise),e.stroke(),o&&(e.setLineWidth(s),e.setFillStyle(o),e.fill())}function H(e){new Promise((e=>{if(T)return e(T);T=w(P.value,E),e(T)})).then((t=>{t.clearRect(0,0,G.value,G.value),function(e){O(e,S.layerColor,0,l,S.fill)}(t);const o=(s=e,Math.min(Math.max(s,0),100));var s;0!==o?function(e,t){const o=l*(t/100),s=S.clockwise?a+o:3*Math.PI-(a+o);if(M(S.color)){const l=e.createLinearGradient(G.value,0,0,0);Object.keys(S.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>l.addColorStop(parseFloat(e)/100,S.color[e]))),j.value=l}else j.value=S.color;O(e,j.value,a,s)}(t,o):function(e){const a=W.value,t=G.value/2;if(M(S.color)){const l=e.createLinearGradient(G.value,0,0,0);Object.keys(S.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>l.addColorStop(parseFloat(e)/100,S.color[e]))),j.value=l}else j.value=S.color;e.beginPath(),e.arc(t,a/4,a/4,0,l),e.setFillStyle(j.value),e.fill()}(t),t.draw()}))}function R(){F.value&&clearTimeout(F.value)}return(e,l)=>{const a=y,t=k,o=x;return d(),n(t,{class:_(`wd-circle ${e.customClass}`),style:p(e.customStyle)},{default:m((()=>[v(a,{width:G.value,height:G.value,style:p($.value),id:P.value,"canvas-id":P.value},null,8,["width","height","style","id","canvas-id"]),e.text?(d(),n(o,{key:1,class:"wd-circle__text"},{default:m((()=>[V(h(e.text),1)])),_:1})):(d(),n(t,{key:0,class:"wd-circle__text"},{default:m((()=>[f(e.$slots,"default",{},void 0,!0)])),_:3}))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-96d4ed4f"]]),E=P(a({__name:"Index",setup(a){const o=t(20),s={0:"red",100:"white"};function u(){o.value<100&&(o.value+=10)}function c(){o.value>0&&(o.value-=10)}const r=e();function i(){r.alert("操作成功")}return(e,a)=>{const t=g(S("wd-message-box"),l),r=g(S("wd-circle"),$),p=g(S("demo-block"),G),f=k,_=g(S("wd-button"),W),w=g(S("page-wraper"),T);return d(),n(f,{class:"circle"},{default:m((()=>[v(w,null,{default:m((()=>[v(t),v(p,{title:"基础用法"},{default:m((()=>[v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),text:o.value+"%"},null,8,["modelValue","text"])])),_:1}),v(p,{title:"样式定制"},{default:m((()=>[v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e),"stroke-width":6,text:"宽度定制"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value=e),"layer-color":"#eee",color:"#ee0a24",text:"颜色定制"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value=e),color:s,text:"渐变色"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value=e),color:"#07c160",clockwise:!1,text:"逆时针"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[5]||(a[5]=e=>o.value=e),size:120,text:"大小定制"},null,8,["modelValue"])])),_:1}),v(p,{title:"使用slot"},{default:m((()=>[v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[6]||(a[6]=e=>o.value=e),"stroke-width":6},{default:m((()=>[v(f,{style:{color:"red"}},{default:m((()=>[V(h(o.value)+"%",1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),v(p,null,{default:m((()=>[v(_,{"custom-style":"margin-right:24rpx",type:"primary",size:"small",onClick:u},{default:m((()=>[V("增加")])),_:1}),v(_,{type:"error",size:"small",onClick:c},{default:m((()=>[V("减少")])),_:1})])),_:1}),v(p,{title:"alert"},{default:m((()=>[v(_,{onClick:i},{default:m((()=>[V("alert")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-7da3dbac"]]);export{E as default};
