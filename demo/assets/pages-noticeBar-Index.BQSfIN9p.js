import{d as e,r as t,q as a,X as l,v as n,m as o,a8 as i,T as s,a9 as r,o as u,c,w as d,x as f,e as p,y as v,g as x,F as w,h as y,f as b,t as _,p as m,n as h,i as g,L as k,a as $,b as C,aa as D}from"./index-BYA5EtG0.js";import{f as T,i as j,l as S,m as F,w as I,o as P,t as A,r as z,K as X,b as q,a as G}from"./page-wraper.BLx1nEHM.js";import{_ as H}from"./demo-block.icKxg5-P.js";import{_ as K}from"./wd-button.Dpaqum9N.js";const L=q(e({name:"wd-notice-bar",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...T,text:{type:[String,Array],default:""},type:j("warning"),scrollable:S(!0),delay:F(1),speed:F(50),closable:S(!1),wrapable:S(!1),prefix:String,color:String,backgroundColor:String,direction:j("horizontal")},emits:["close","next","click"],setup(e,{expose:$,emit:C}){const D=".wd-notice-bar__wrap",T=".wd-notice-bar__content",j=e,S=C,F=t(0),q=t(!0),G=t(0),H=a((()=>Array.isArray(j.text)?j.text:[j.text])),K=a((()=>H.value[G.value])),L=t(0),M=t(null),N=t(null),V=a((()=>"horizontal"===j.direction)),Y=a((()=>"vertical"===j.direction)),B=l({transitionProperty:"unset",transitionDelay:"unset",transitionDuration:"unset",transform:"none",transitionTimingFunction:"linear"}),E=a((()=>P(B))),J=a((()=>{const e={};return A(j.color)&&(e.color=j.color),A(j.backgroundColor)&&(e.background=j.backgroundColor),`${P(e)};${j.customStyle}`})),O=a((()=>{const{type:e,wrapable:t,scrollable:a}=j;let l=[];return e&&l.push(`is-${e}`),V.value?!t&&!a&&l.push("wd-notice-bar--ellipse"):l.push("wd-notice-bar--ellipse"),t&&!a&&l.push("wd-notice-bar--wrap"),l.join(" ")})),{proxy:Q}=k();function R(){W(),U()}function U(){r((()=>async function(){const[e,t]=await te();if(!e.width||!t.width||!t.height)return;M.value=e,N.value=t,F.value=e.width,V.value?j.scrollable&&ee({duration:t.width/j.speed,delay:j.delay,translate:-t.width}):H.value.length>1&&ae(t.height)}()))}function W(){B.transitionProperty="unset",B.transitionDelay="unset",B.transitionDuration="unset",B.transform="none",B.transitionTimingFunction="linear",G.value=0,L.value=0}function Z(){q.value=!1,S("close")}function ee({duration:e,delay:t,translate:a}){B.transitionProperty="all",B.transitionDelay=`${t}s`,B.transitionDuration=`${e}s`,B.transform=`${"vertical"===j.direction?"translateY":"translateX"}(${a}px)`,B.transitionTimingFunction="linear"}function te(){return Promise.all([X(D,!1,Q),X(T,!1,Q)])}async function ae(e){const t=-e/(H.value.length+1)*(G.value+1);ee({duration:e/(H.value.length+1)/j.speed,delay:j.delay,translate:t})}function le(){V.value?ee({duration:0,delay:0,translate:F.value+1}):++L.value>=H.value.length&&(L.value=0,ee({duration:0,delay:0,translate:0}));const e=setTimeout((()=>{G.value>=H.value.length-1?G.value=0:G.value++,S("next",G.value),r((async()=>{try{const[e,t]=await te();M.value=e,N.value=t,F.value=e.width||0}catch(e){}N.value&&N.value.width&&N.value.height&&(V.value?ee({duration:(F.value+N.value.width)/j.speed,delay:j.delay,translate:-N.value.width}):ae(N.value.height))})),clearTimeout(e)}),20)}function ne(){const e=z(j.text)?{index:G.value,text:j.text[G.value]}:{index:0,text:j.text};S("click",e)}return n((()=>j.text),(()=>{R()}),{deep:!0}),o((()=>{U()})),i((()=>{U()})),s((()=>{W()})),$({reset:R}),(e,t)=>{const a=g;return q.value?(u(),c(a,{key:0,class:h(`wd-notice-bar ${e.customClass} ${O.value}`),style:v(J.value)},{default:d((()=>[e.prefix?(u(),c(I,{key:0,"custom-class":"wd-notice-bar__prefix",name:e.prefix},null,8,["name"])):f(e.$slots,"prefix",{key:1},void 0,!0),p(a,{class:"wd-notice-bar__wrap"},{default:d((()=>[p(a,{class:"wd-notice-bar__content",style:v(E.value),onTransitionend:le,onClick:ne},{default:d((()=>[Y.value?(u(),x(w,{key:0},[(u(!0),x(w,null,y(H.value,(e=>(u(),c(a,{key:e},{default:d((()=>[b(_(e),1)])),_:2},1024)))),128)),H.value.length>1?(u(),c(a,{key:0},{default:d((()=>[b(_(H.value[0]),1)])),_:1})):m("",!0)],64)):f(e.$slots,"default",{key:1},(()=>[b(_(K.value),1)]),!0)])),_:3},8,["style"])])),_:3}),e.closable?(u(),c(I,{key:2,"custom-class":"wd-notice-bar__suffix",name:"close-bold",onClick:Z})):f(e.$slots,"suffix",{key:3},void 0,!0)])),_:3},8,["class","style"])):m("",!0)}}}),[["__scopeId","data-v-8ed555d4"]]),M=q(e({__name:"Index",setup(e){const a=t();function l(){var e;null==(e=a.value)||e.reset()}const n=t(["欢迎使用wot design uni","该组件库基于uniapp ->Vue3, ts构建","项目地址：https://github.com/Moonofweisheng/wot-design-uni","我们的目标是打造最强uniapp组件库","诚挚邀请大家共同建设","这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息"]),o=e=>{console.log("展示下一条，index: ",e),console.log("文本是："+n.value[e])};function i(e){console.log(e)}return(e,t)=>{const s=$(C("wd-notice-bar"),L),r=$(C("demo-block"),H),f=$(C("wd-icon"),I),v=$(C("wd-button"),K),x=g,w=$(C("page-wraper"),G);return u(),c(w,null,{default:d((()=>[p(x,null,{default:d((()=>[p(r,{title:"基本用法"},{default:d((()=>[p(s,{text:"这是一条消息提示信息这是一条消息提示信息这是一条消息提示信息",prefix:"warn-bold"})])),_:1}),p(r,{title:"类型修改"},{default:d((()=>[p(s,{type:"danger",text:"当前网络不可用，请检查你的网络设置。当前网络不可用，请检查你的网络设置。",prefix:"wifi-error","custom-class":"space"}),p(s,{type:"info",text:"pc-win沃特已登录，可在“设备管理”中查看详情。pc-win沃特已登录，可在“设备管理”中查看详情。",prefix:"check-outline"})])),_:1}),p(r,{title:"禁止滚动"},{default:d((()=>[p(s,{scrollable:!1,text:"通知被禁或时段内消息屏蔽可能造成消…",prefix:"warn-bold"})])),_:1}),p(r,{title:"插槽"},{default:d((()=>[p(s,{scrollable:!1},{prefix:d((()=>[p(f,{"custom-class":"prefix",name:"warn-bold"},{default:d((()=>[b("占位符")])),_:1})])),suffix:d((()=>[D("div",{style:{color:"#4d80f0"}},"查看")])),default:d((()=>[b(" 通知被禁或时段内消息屏蔽可能造成消… ")])),_:1})])),_:1}),p(r,{title:"可关闭的"},{default:d((()=>[p(s,{text:"挂起后，电脑与手机均不会有新客户接入。挂起后，电脑与手机均不会有新客户接入。",closable:"",prefix:"warn-bold"})])),_:1}),p(r,{title:"多行展示"},{default:d((()=>[p(s,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",wrapable:"",scrollable:!1})])),_:1}),p(r,{title:"自定义颜色"},{default:d((()=>[p(s,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",prefix:"check-outline",color:"#34D19D","background-color":"#f0f9eb"})])),_:1}),p(r,{title:"多文本轮播"},{default:d((()=>[p(s,{onClick:i,text:n.value,prefix:"check-outline",onNext:o},null,8,["text"])])),_:1}),p(r,{title:"垂直滚动"},{default:d((()=>[p(s,{onClick:i,prefix:"warn-bold",direction:"vertical",text:n.value,delay:3,"custom-class":"space"},null,8,["text"]),p(s,{onClick:i,prefix:"warn-bold",direction:"vertical",text:"只有一条消息不会滚动",delay:3,"custom-class":"space"})])),_:1}),p(r,{title:"重置播放动画"},{default:d((()=>[p(s,{ref_key:"notice",ref:a,prefix:"warn-bold",direction:"vertical",text:n.value,delay:3,"custom-class":"space"},null,8,["text"]),p(v,{onClick:l},{default:d((()=>[b("重置播放动画")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-ea79056b"]]);export{M as default};
